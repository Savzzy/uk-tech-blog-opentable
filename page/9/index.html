<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img="3" data-img-src-1="/bigimgs/building.jpg" data-img-desc-1="Alphabeta Building" data-img-src-2="/bigimgs/kitchen.jpg" data-img-desc-2="OpenTable London office" data-img-src-3="/bigimgs/office.jpg" data-img-desc-3="OpenTable Engineers"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>OpenTable Tech UK Blog</h1><hr class="small"><span class="page-subheading">The technology blog for OpenTable UK.</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/blog/2014/05/15/managing-windows-features-with-puppet/"><h2 class="post-title">Managing Windows Features with Puppet</h2></a><p class="post-meta">Posted on 15 May 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/PowerShell/" class="tag post-meta">PowerShell</a> · <a href="/blog/categories/DevOps/" class="tag post-meta">DevOps</a> · <a href="/blog/categories/Configuration-Management/" class="tag post-meta">Configuration Management</a> · <a href="/blog/categories/Windows/" class="tag post-meta">Windows</a> · <a href="/blog/categories/WindowsFeature/" class="tag post-meta">WindowsFeature</a></p><div class="post-entry"><p>Back in June 2013, I wrote about <a href="/blog/2013/06/14/windows-feature-management-with-powershell/">Windows Feature Management with PowerShell</a>. We have since released a Puppet module that will do this for us. We originally wrote PowerShell:</p>
<pre><code>Import-Module ServerManager
Add-WindowsFeature Web-Asp-Net
</code></pre><p>The Puppet module now wraps this code as follows:</p>
<pre><code>windowsfeature { &apos;Web-Asp-Net&apos;: }
</code></pre><p>The declaration windowsfeature is a specific Puppet type called a <a href="http://docs.puppetlabs.com/learning/definedtypes.html" target="_blank" rel="noopener">define</a>. In developer terms, this is the equivalent of a helper method that can be reused. We can also make sure that Windows Features are <em>not</em> installed on the server as follows:</p>
<pre><code>windowsfeature { &apos;Telnet-Server&apos;: 
  ensure =&gt; absent 
}
</code></pre><p>In the backing code for the module, we do a check before we install / uninstall any windows features. This means that we will only make the changes we really need to. This ensures idempotency of the script. By using this class, we can build up a list of what features a server should have enabled / installed on it. As example manifest would look as follows:</p>
<pre><code>class my_windows_features {
  windowsfeature { &apos;Web-Asp-Net&apos;: }
  windowsfeature { &apos;Web-Net-Ext&apos;: }
  windowsfeature { &apos;Web-ISAPI-Ext&apos;: }
  windowsfeature { &apos;Web-ISAPI-Filter&apos;: }
  windowsfeature { &apos;Web-Mgmt-Tools&apos;: }
  windowsfeature { &apos;Web-Mgmt-Console&apos;: }
  windowsfeature { &apos;Telnet-Server&apos;: ensure =&gt; absent }
}
</code></pre><p>The server will have it’s shipping list of Windows Features checked every 30 minutes by Puppet. We are sure that any changes encountered during that time will be applied as expected.  You can find more about our WindowsFeature module on the <a href="http://github.com/opentable/puppet-windowsfeature" target="_blank" rel="noopener">github repo</a>. If you want to use the module, then you can install it using the Puppet Module tool via the <a href="http://forge.puppetlabs.com/opentable/windowsfeature" target="_blank" rel="noopener">Puppet Forge</a></p>
</div><a href="/blog/2014/05/15/managing-windows-features-with-puppet/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/05/13/managing-windows-web-applications-with-puppet/"><h2 class="post-title">Managing Windows Web Applications with Puppet</h2></a><p class="post-meta">Posted on 13 May 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/PowerShell/" class="tag post-meta">PowerShell</a> · <a href="/blog/categories/DevOps/" class="tag post-meta">DevOps</a> · <a href="/blog/categories/Configuration-Management/" class="tag post-meta">Configuration Management</a> · <a href="/blog/categories/Windows/" class="tag post-meta">Windows</a> · <a href="/blog/categories/IIS/" class="tag post-meta">IIS</a></p><div class="post-entry"><p>As part of our move towards a configuration management tool, we really wanted to start automating as much of our infrastructure as possible. This included our application configuration stack. IIS management is pretty easy with PowerShell. It would look something like this</p>
<pre><code>Import-Module WebAdministration
New-WebSite -Name &quot;DemoSite&quot; -Port 80 -IP * -PhysicalPath &quot;c:\inetpub\wwwroot&quot; -ApplicationPool &quot;MyAppPool&quot;
</code></pre><p>This would of course set up a website called ‘DemoSite’ running on port 80 on the local machine. The cmdlets that come with PowerShell make this pretty easy. This is great if it is a one-off job to set up a site. We run our websites from a number of webservers, therefore, it would be silly to have to RDP into each webserver and run a script on it. This is why tools like Puppet, Chef, Ansible etc. exist. We needed a configuration management tool to do this work for us. It has a number of benefits:</p>
<ul>
<li>Orchestration</li>
<li>Idempotency</li>
<li>Makes sure that each server is configured in ‘exactly’ the same way as no human intervention is needed</li>
<li>Developers can help the operations team by creating the scripts needed. This is great for collaboration between teams</li>
</ul>
<p>On investigating how we would do this with Puppet, we noticed that there were not many other people managing their site in this way. Therefore, we would have to turn our PowerShell scripts into Puppet modules to manage our system. </p>
<p>We have since created a Puppet module to manage IIS. To manage IIS with Puppet, we can now write the following code:</p>
<pre><code>iis::manage_site { &apos;DemoSite:
   site_path     =&gt; &apos;c:\inetpub\wwwroot&apos;,
   port          =&gt; &apos;80&apos;,
   ip_address    =&gt; &apos;*&apos;,
   app_pool      =&gt; &apos;MyAppPool&apos;
}
</code></pre><p>This would produce <strong>exactly</strong> the same results as the code from above. But it has 1 difference. There are checks in the code behind this module that will mean the code will only execute when it is needed, i.e. when the site_path isn’t correct or the app_pool isn’t correct. This is idempotency. The script can be run again and again and again….</p>
<p>To create an application binding, we used to do this in PowerShell:</p>
<pre><code>Import-Module WebAdministration
New-WebBinding -Name &apos;DemoSite&apos; -Port &apos;8080&apos; -IPAddress &apos;*&apos;
</code></pre></div><a href="/blog/2014/05/13/managing-windows-web-applications-with-puppet/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/04/29/remote-worker-notes-tools-and-setup/"><h2 class="post-title">Remote Worker Notes &ndash; Tools and Setup</h2></a><p class="post-meta">Posted on 29 April 2014 · <a href="/blog/categories/Work-smarter/" class="tag post-meta">Work smarter</a> · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Agile/" class="tag post-meta">Agile</a> · <a href="/blog/categories/Remote-working/" class="tag post-meta">Remote working</a></p><div class="post-entry"><p>For the last couple months I’ve been working remotely with our search team at OpenTable. Let me share our remote working setup and some rationale for our choices. I will shy away from judging how it’s all worked out and leave that for subsequent blog posts.</p>
<h2 id="The-deal"><a href="#The-deal" class="headerlink" title="The deal"></a>The deal</h2><p>I started as an on-site engineer and subsequently became a remote worker and my challenge was to make remote working as similar to on-site working as possible. Thus it is natural that <strong>I work the same working hours</strong> as my colleagues in the office (despite the time difference) and I take <strong>public holidays</strong> at the same time that there are bank holidays in UK (even though in Poland they are different).</p>
<p>We also decided that every two months I will <strong>visit the office for a week</strong> as well as arranging visits to coincide with other office guests (like contractors, overseas colleagues and so on). All this is to try to keep me as close to the team as possible and disrupt the normal work-flow as little as possible.</p>
<h2 id="The-workplace-setup"><a href="#The-workplace-setup" class="headerlink" title="The workplace setup"></a>The workplace setup</h2><p>Once home in Poland I had to carefully consider my options for a workplace. I tried three obvious possibilities:</p>
<ul>
<li>Dining room in my own one bedroom flat</li>
<li>Co-working space</li>
<li>Private room in my parents’ house</li>
</ul>
<p>The <strong>dining room</strong> worked pretty well, for a time…  I would ‘arrive’ really early in the office (just after taking a shower), and then be ‘home’ straight after the laptop lid was closed. My wife kindly respected that I am focused at work and distracted me only to share lunch (or to kick me out of house to bring the lunch in).</p>
<p>A couple of things made it only a short-term solution - the first being my back complaining about working on a chair that’s nice for a dinner, but awful for working on computer. Then I realised that I really miss a second monitor and separate keyboard &ndash; I guess anybody who coded in the middle of summer on a laptop knows the pain of a hot computer under your fingers.  Finally, my child was born, and that was it &ndash; a crying child in the same room when you are trying to pair with somebody is a deal-breaker.</p>
<p>In the meantime I evaluated a local <strong>co-working space</strong>. The problem was that it was quiet, <em>really quiet</em>, up to the point that I was embarrassed to pair with somebody remotely. The way we work fluctuates over time; there are weeks when I do stuff alone and in silence, there are weeks when I spend whole days on conversations or pairing. I just cannot be too quiet. For that matter I tried also a coffee shop, but it failed me for exactly the same reasons as the dining room table.</p></div><a href="/blog/2014/04/29/remote-worker-notes-tools-and-setup/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/04/28/effective-prioritisation/"><h2 class="post-title">Effective prioritisation</h2></a><p class="post-meta">Posted on 28 April 2014 · <a href="/blog/categories/Leadership/" class="tag post-meta">Leadership</a> · <a href="/blog/categories/Coaching/" class="tag post-meta">Coaching</a> · <a href="/blog/categories/Work-smarter/" class="tag post-meta">Work smarter</a> · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a></p><div class="post-entry"><p>Prioritisation is a huge part of modern life.</p>
<p>No.</p>
<p>Prioritisation is an ESSENTIAL part of modern life.</p>
<p>I’m not talking solely about Agile here either. Yes we plan stories, yes we prioritise them to get them into the backlog but I’m aiming at a higher level. Life lessons that are useful to all of us.</p>
<p>How do we know what to do next? Perhaps you lean on your gut feeling to order your to-do list. Maybe it is real-time cost and budget implications that influence your priorities or does it come down to who shouts loudest?</p>
<h2 id="Why-is-prioritisation-important"><a href="#Why-is-prioritisation-important" class="headerlink" title="Why is prioritisation important?"></a>Why is prioritisation important?</h2><p>The experts would have us believe we are living through the Digital Age, also know as the Computer Age. Increasingly this has been more accurately redefined as the Information Age. </p>
<p>The society we live in today truly bombardes us with information. Whether it be TV, mobile, emails, blog posts, status updates, tweets, likes and check-in’s we are rarely unconnected to modern day life and have a vast amount of data and information at our disposal.</p>
<p>This flood of information leads to a problem: we often confuse the importance of everyday tasks and activities. </p>
<p>For instance how many times have we said “I don’t have time to read” or “I’d love to be able to go to the gym more”. Perhaps a more honest way to say this is “reading is not a high priority for me” or “I prioritise other activities higher than going to the gym”. </p></div><a href="/blog/2014/04/28/effective-prioritisation/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/04/16/look-ma-no-unit-tests/"><h2 class="post-title">Look ma, no unit tests!</h2></a><p class="post-meta">Posted on 16 April 2014 · <a href="/blog/categories/Acceptance-tests/" class="tag post-meta">Acceptance tests</a> · <a href="/blog/categories/Innovation/" class="tag post-meta">Innovation</a> · <a href="/blog/categories/Testing/" class="tag post-meta">Testing</a> · <a href="/blog/categories/Engineering/" class="tag post-meta">Engineering</a></p><div class="post-entry"><p><em><strong>UPDATE:</strong> I’ve written a <a href="/blog/2014/05/19/acceptance-now">follow-up to this post</a> with a bit more detail into how we made acceptance-only testing work in practice.</em></p>
<p>At OpenTable we strive to deliver change as quickly and correctly as possible. To do this effectively we are always looking for <a href="/blog/2014/02/28/api-benchmark/">new</a> <a href="/blog/2013/08/16/grunt-plus-vagrant-equals-acceptance-test-heaven/">tools</a> <a href="/blog/2014/04/07/upgrading-puppet-with-puppet/">and</a> <a href="/blog/2014/02/10/the-adoption-of-configuration-management/">methods</a> that allow us, the developers, to respond quickly and accurately to changing requirements and environments.</p>
<p>There are a number of practices that we already make use of, helping us to be the most effective team I’ve ever worked in:</p>
<ul>
<li>We operate in small teams who each own <em>most</em> of their own vertical.</li>
<li>We use continuous delivery to ship code to production within minutes.</li>
<li>We have a high degree of high-quality test coverage.</li>
<li>We are getting better and better at monitoring All The Things.</li>
<li><a href="/blog/2013/11/22/beginning-a-journey-to-chatops-with-hubot/">We use Chatops</a>, so communication is central to our work, and keeps remote workers/teams in the loop.</li>
</ul>
<p>All of the above are truly empowering for the dev team, and are conducive to an amazingly stress-free working environment. However, these practices only address the infrastructure, culture, and ceremony surrounding our work. What if there was something else? Something about the way we write the code itself, that could increase our velocity yet further, without compromising our integrity…</p>
<blockquote>
<p>There are a number of practices that we already make use of, helping us to be the most effective team I’ve ever worked in… What if there was something else?</p>
</blockquote>
<p>Well, on a recent project, we found one such way: <em><em>we decided to delete all of the unit and integration tests</em></em>.</p>
<p><em>What?! Are we quite mad?</em> You may be thinking… Well, it took me a little time to get used to this idea as well, but read on and you’ll see that it was actually the most sane thing we could have possibly done    .</p>
<h2 id="Survival-of-the-testedest"><a href="#Survival-of-the-testedest" class="headerlink" title="Survival of the testedest"></a>Survival of the testedest</h2><p>In the beginning, the project had 100% unit test coverage, there were no external dependencies, and the world was Good.</p></div><a href="/blog/2014/04/16/look-ma-no-unit-tests/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="previous"><a href="/page/8">← Newer Posts</a></li><li class="next"><a href="/page/10">Older Posts →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2022 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>